####T####WLED FAQ
####U####Inoffizielle Dokumentation/FAQ

###01###Inbetriebnahme
###02###Controller
###03###LED Streifen
###04###Verkabelung
###05###WLED SW Allgemein
###06###Einstellungen
###07###Presets und Playlists
###08###Sync, virtuelle LEDs etc.
###09###Sound-/Audioreaktive WLED
###10###Bekannte Probleme

##01##Was sind die häufigsten Fehler bei der Inbetriebnahme von WLED?
Die häufigsten Fehler sind:
1. LED Streifen ist von hinten an angeschlossen: adressierbare LED Streifen haben eine Richtung, die durch kleine Pfeile auf dem Streifen gekennzeichnet ist. Der Anschluss der Datenleitung muss unbedingt von der Seite erfolgen, wo der Pfeil beginnt.
[pic4]
2. Falsches GPIO eingestellt: Prüfen Sie in WLED Einstellungen, ob als Datenausgang die richtige GPIO Nummer eingestellt ist. Die fertigen Controller haben korrekte Einstellungen meistens entweder auf dem Gehäuse oder auf der Platine aufgedruckt.
[pic5]
3. LED Streifen mit vielen LEDs angeschlossen und eingestellt, aber der Stromlimiter steht noch auf dem Default Wert (850 mA). Das wirkt oft so aus, dass LEDs bei Änderung der Farbe kurz blinken und sofort ausgehen oder sehr schwach leuchten. Prüfen und korrigieren Sie ggf. die Einstellungen in WLED.
[pic6]
4. Falsches LED Typ ist eingestellt. In WLED Einstellungen muss der richtige LED Typ und die richtige Farbenreihenfolge (RGB, BGR, etc.) eingestellt werden. Prüfen Sie, ob diese Einstellungen korrekt sind. LED Typ muss man wissen, die Farbenreihenfolge kann man notfalls einfach ausprobieren, welche die richtige ist. Speziell muss beim WS2814 LED Streifen aufgepasst werden, dieser muss in Einstellungen als SK6812 gewählt werden.
[pic7]
5. Verkabelung ist nicht in Ordnung. Die Verkabelung muss gründlich ausgeführt werden. Wackelkontakte, kalte Lötstellen etc. müssen vermieden werden. Sie müssen außerdem aus Sicherheitsgründen auf die richtige Dimensionierung der Kabel aufpassen. 

##01##Welches Password hat WLED-AP?
Wenn WLED Software auf ihrem Controller zum ersten Mal installiert ist und Sie nicht bereits bei der Installation mit dem WEB-basierten Installer Ihre WiFi daten eingegeben haben, dann erzeugt bei einem Neustart der WLED Controller einen Access Point (WLAN) mit dem Namen WLED-AP. Das Passwort für dieses WLAN ist wled1234. Dieses Passwort kann in WLED Einstellungen unter Config->WiFi setup geändert werden.
[pic8]

##01##Ich habe Password für mein WLAN in WLED falsch eingestellt, was tun?
Im initialen Zustand mit default Einstellungen versucht WLED SW mit dem eingegebenen WLAN sich zu verbinden. Klappt es nicht, wird wieder WLED-AP erzeugt. Also warten Sie einfach, bis WLED-AP wieder erscheint. Dieses verhalten kann jedoch in WLED Einstellungen geändert werden. WLED-AP kann also z.B. ganz verhindert werden. Wenn Sie das bereits so eingestellt haben, dann hilft nur ein „Hardreset“ oder Neuflaschen mit WLED SW.
[pic9]

##01##Was brauche ich so alles für „WLED“?
Die Antwort auf diese Frage häng davon ab, ob man WLED nur ausprobieren möchte oder einen zuverlässig funktionierenden und sicheren Aufbau machen möchte.
WLED Auszuprobieren: dafür reicht ein ESP8266 oder ESP32 Mikrocontroller Board (z.B. die sogenannten D1 mini oder NodeMCU Boards), ein 5V Netzteil und ein 5V LED Streifen (fürs Anfang z.B. mit 30-90 LEDs). Auf dem Mikrocontroller wird WLED Software installiert (z.B. mit diesem Web-basierten WLED Installer).
[pic10]
Für einen richtigen Aufbau müssen aber noch einige andere Dinge beachtet werden:
1. Für eine zuverlässige Datenübertragung vom Controller zum LED Streifen braucht man ein LevelShifter (insbesondere bei 12V oder 24V LED Streifen ist das Pflicht). Da muss man dann einiges zusammenlöten oder man kauft gleich einen professionellen fertigen WLED Controller. Diese sind auch aufgrund industrieller Fertigung/Bestückung deutlich zuverlässiger als jedes mit Hand gelöteter Aufbau.
2. Aus Sicherheitsgründen muss über die richtige Verkabelung (Länge, Querschnitt, Kontaktierungen) und zu integrierende Sicherungen nachgedacht werden. Insbesondere bei LED Streifen wird es komplizierter, weil man die sogenannten Zwischeneinspeisungen braucht. Diese müssen korrekt geplant und umgesetzt werden. Als Hilfestellung kann dabei WLED Calculator dienen.
3. LED Streifen können im Betrieb recht warm werden und im Fehlerfall sogar überhitzen. Wiederum aus Sicherheitsgründen muss man die Umgebung davon schützen: man sollte LED Streifen deswegen nicht einfach so verlegen, sollte idealerweise in Aluprofile oder ähnliches integrieren. Diese wirken im normalen Betrieb wie ein Kühlkörper und verlängern damit die Lebensdauer der LEDs. Im Fehlerfall können sie die Umgebung vom Brad schützen.
[pic11]
4. Um Energie zu sparen wenn die LEDs ausgeschaltet sind, Relais können zusätzlich verwendet werden. Diese schalten die Stromversorgung der LEDs im Aus Zustand dann komplett ab. 
##02##Welche Mikrocontroller Typen werden von WLED SW unterstützt?
Aktuell (Stand Sommer 2023) werden vollständig nur die Mikrocontroller der Firma Espressif, Typen ESP8266 und ESP32 (mit Dual Core) unterstützt. Einige der neueren Typen wie ESP32-C3, ESP32-S2 und ESP32-S3 werden experimentell unterstützt, es ist aber noch kein produktiver Einsatz empfohlen, weil noch viele Bugs vermutet werden. Außerdem ist die Installation bei diesen neueren Typen nicht so einfach: es existieren mehrere Hardwarevariationen/Boards, für die man die SW speziell kompilieren muss. Zu erwähnen ist noch, dass am Markt immer noch einige ESP32-C3 Boards (sog. Mini Ver 1.0.0) verkauft werden, wo WLAN nicht richtig funktioniert.
Es ist auch zu erwähnen, dass die aktuellen Sound Reactive WLED Versionen nur ESP32 Mikrocontroller unterstützen. Der letzte Release für ESP8266 war WLED SR 13.0-beta3.
##02##Wie viele LEDs kann ein WLED Controller ansteuern?
ESP8266 basierte Controller können bis zu ca. 600-650 LEDs ansteuern. ESP32 basierte Controller könne bis zu 4.000 LEDs ansteuern. Dabei wird jedoch empfohlen, LEDs Streifen auf mehrere Eingänge zu verteilen, so dass an einem Eingang nicht mehr als 1000 LEDs angeschlossen ist: viele LEDs n einem Ausgang führen dazu, dass die Ansteuerungsrate sinkt und man bei schnellen Effekten dann Unregelmäßigkeiten sieht. Bei der Verwendung von einigen Übertragungsprotokollen muss außerdem berücksichtigt werden, dass diese eventuell auch nur eine eingeschränkte LED Anzahl unterstützen.
##02##Wird ein LevelShifter beim WLED Controller wirklich benötigt?
Viele 5V LED Streifen lassen sich auch ohne LevelShifter betreiben, insbesondere wenn die Leitung zwischen dem Controller und dem LED Streifen sehr kurz ist. Manchmal kann dabei aber zu Flickering kommen, z.B dass die LEDS mal kurz in weiß blinken. Auch größere Störungen sind möglich. Bei 12V oder 24V LED Streifen kommt man meistens ohne LevelShifter nicht klar. Ein LevelShifter wird aber auch bei 5V LED Streifen ausdrücklich empfohlen, insbesondere bei einem produktiven Einsatz, um einen störungsfreien Betrieb zu gewährleisten: ein LevelShifter passt den Signalpegel des Mikrocontrollers (3.3V) an den Signalpegel des LED Streifens (5V bei allen adressierbaren LED Typen).
Professionelle WLED Controller haben einen LevelShifter immer integriert.
##02##Welche LevelShifter werden empfohlen?
Die Ansteuerung der adressierbaren LED Streifen Läuft mit Steuersignalen, welche eine Grundfrequenz im Bereich 800 kHz bis ins einstelligen MHz Bereich haben (je nach Typ). Entsprechend muss ein LevelShifter schnell genug sein, ob diese Signale sauber weiter geben zu können. Empfohlen werden daher schnelle Typen wie SN74AHCT125, SN74AHCT32 oder SN74LVC2T45. Typen wie SN74HCT (also ohne „A“) sind etwas langsamen und für LED Typen wie WS2812B i.O., für einige andere LED Typen können aber zu langsam sein. In jedem Fall nicht empfohlen sind mit Transistoren aufgebaute fertige bidirektionale I2C LevelShifter. Notfalls können diese verwendet werden, man sollte aber dann den Pull-Up Widerstand am Ausgang (meistens 10 kOhm) durch einen kleineren ersetzen (<=1 kOhm). Die SN74AHCT125 LevelShifter werden wie folgt verschaltet:
[pic1]
[pic2]
Es kann auch ein TXS0108 LevelShifter verwndet werden. Diese sind auch verfügbar bereits auf kleiner Leiterplate verlötet:
[pic3]
##02##Muss in der Datenleitung zwischen dem WLED Controller und LED Streifen ein Widerstand eingebaut werden, welcher?
In meisten Fällen wird ein Widerstand im Bereich 33 kOhm bis 68 kOhm empfohlen. Die alte Empfehlung war 470 kOhm, der Wert in dieser Größenordnung ist aber aus heutiger Sicht nicht i.O. Ein Betrieb ohne einen Widerstand ist grundsätzlich auch möglich, sollte aber bei einem produktiven Einsatz vermieden werden. 
##02##Wird ein fertiger WLED Controller empfohlen, oder kann man sich ein aus einzelnen Komponenten zusammen bauen?
Die Antwort hängt davon ab, was man damit machen möchte. Für experimentieren/rumprobieren reicht auch einfach ein ESP8266 oder ESP32 Mikrocontroller Board ohne weitere Komponenten. Möchte man eine saubere Installation machen, die länger ohne Störungen funktionieren soll, kommt man um ein fertiges Teil eigentlich nicht drum herum. Qualitative fertige WLED Controller integrieren nicht nur alle notwendigen Komponenten, sie sind auch aufgrund industrieller Fertigung/Bestückung deutlich zuverlässiger als jedes mit Hand gelöteter Aufbau. Die schlechteste Idee ist das Ganze mit Jumper Wire oder ähnliches aufzubauen: es sind nicht nur Wackelkontakte vorprogrammiert, sondern man erzeugt damit unter Umständen auch ein hohes Sicherheitsrisiko.
##02##Kann man ein Taster an WLED Controller anschließen?
Ja. Man braucht am Controller dafür einen freien digitalen Eingang (GPIO). Dann kann man zwischen diesem Eingang und Masse (GND) einen Taster verbinden. Klickt man auf den Taster, wird dieser GPIO in dem Moment mit der Masse verbunden und der Controller registriert das wie ein Klick. Damit das jedoch passiert, muss der Taster in WLED Einstellungen korrekt eingestellt werden. Zunächst muss ein Taster konfiguriert werden. Dafür muss man unter Config->LED Preferences einem „Button“ (z.B. man nimmt als erstes „Button 1“) die GPIO Nummer zuweisen, an den man den Taster angeschlossen hat. Zudem muss man den Taster-Typ definieren. Im Normallfall ist es ein „Pushbutton“. Danach kann man einstellen, was passieren soll, wenn der Taster angeklickt wird. Dafür geht man zu Config->Time & Macros. Hier im Bereich „Button actions“ kann man für jeden Taster bis zu drei Presets definieren (Preset ID eintragen), die ausgeführt werden müssen, wenn ein Taster kurz, lang oder doppel geklickt wird (daher drei Spalten). Presets muss man natürlich davor erstellt haben. Für einen Schalter können Sie festlegen, welcher Preset beim Ein- und Ausschalten aufgerufen werden soll. Die dritte Einstellung (dritte Spalte) hat in diesem Fall keine Bedeutung.
[pic12]
##02##Wie viele Taster kann man an einen WLED Controller anbinden?
WLED Software unterstützt bis zu 4 Taster bei einem ESP32 und 2 bei einem ESP8266-basierten Controller. Für jeden braucht man einen eigenen GPIO Eingang. Jeder Taster kann dabei bis zu drei Aktionen ausführen: bei einem kurzen Klick, bei einem langen Klick und bei einem Doppelklick.
##02##Kann man ein Bewegungsmelder (PIR-Sensor) an WLED Controller anschließen?
Ja. Es gibt zwei Arten von Sensoren:
1. Mit einer Möglichkeit die Empfindlichkeit und die Zeitverzögerung einzustellen. Z.B. HC-SR501 Typ. Diese Sensoren kann man in WLED wie ein Schalter anschließen und als ein Taster konfigurieren.
2. Ohne die Möglichkeit die Empfindlichkeit und die Zeitverzögerung einzustellen. Z.B. HC-SR602 Typ. Für diese muss man WLED mit einem PIR Sensor UserMod kompilieren.
##02##Kann WLED Controller mit einer Fernbedienung angesteuert werden?
Ja, es gibt zwei Möglichkeiten dafür:
1. Eine Infrarot Fernbedienung. Dafür muss jedoch an WLED Controller ein Infrarot Empfänger angeschlossen werden. Empfohlene Typen sind TSOP38238 oder KY-022. Diese Empfänger haben jeweils drei Pins: 3.3V, GND und IR Daten. IR Daten Pin muss an einen freien GPIO PIN angeschlossen werden. Dieser GPIO muss dann unter „Config->LED Preferences“ als IR GPIO eingestellt werden. Außerdem muss man da wählen, welche Infrarot Fernbedienung man hat. Es stehen folgende Typen zur Auswahl: 24-key RGB, 24-key with CT, 40-key blue, 44-key RGB, 21-key RGB, 6-key black, 9-key red, JSON remote. Der letzte Typ gibt die Möglichkeit, eine andere Fernbedienung zu verwenden. Dafür müssen die IR Codes in einer JSON Datei aufgelistet und dann ins WLED hochgeladen werden.
[pic13]
2. Ab Version WLED 14.0-beta3: Eine ESP-NOW kompatible Fernbedienung. Ein Beispiel dafür ist die Fernbedienung „WIZmote“. Diese basiert auf einem ESP Mikrocontroller. ESP-NOW kann in WLED Einstellungen aktiviert werden (Config->WiFi Setup). Dabei muss man Hardware MAC Adresse von der Fernbedienung eintragen. Dieser ermittelt man indem man auf einen beliebigen Taster der Fernbedienung klickt und in WLED ESP-NOW Einstellungen (unter “Config->WiFi Setup”) die zuletzt empfangene MAC Adresse aus dem Feld „Last Seen“ in das Feld „Hardware MAC“ kopiert und mit „Save“ abspeichert. Vorteile: es muss kein spezieller Empfänger an dem Controller angebracht werden und die Signale werden über Funknetzt übertragen. Es ist also kein Sichtkontakt zwischen der Fernbedienung und dem WLED Controller erforderlich, wie bei einer IR Fernbedienung der Fall ist.
[pic14]
Die 4 Tasten „1“-„4“ der WIZmote Fernbedienung sind mit Presets 1 bis 4 verbunden. Die Bedeutung von anderen Tasten ist selbsterklärend. Achtung: WIZmote braucht zwei gute AAA Batterien um korrekt zu funktionieren. Sind die Batterien zu schwach, wird kein korrektes Signal gesendet, auch wenn die blaue LED auf der Fernbedienung dabei kurz leuchtet und damit eigentlich Signalübertragung anzeigt.
##02##Kann WLED Controller über Ethernet (LAN) angeschlossen werden anstatt Wireless?
Das geht, jedoch nur mit einem ESP32 basierten Controller und mit zusätzlicher Hardware. Dann kann man unter “Config->WiFi Setup” Ethernet aktivieren, in dem man den Ethernet-Controllertyp oder Adaptertyp auswählt: ABC! WLED V43 & compatible, ESP32-POE, ESP32Deux, KIT-VE etc. Es muss WLED Version verwendet werden, die mit Ethernet Unterstützung kompiliert wurde.
##03##Welche LED Streifentypen werden von WLED SW unterstützt?
Am meisten macht WLED mit sogenannten digitalen, adressierbaren LED Streifen Sinn, wo man einzelne LEDs separat ansteuern kann. Damit lassen sich viele Effekte einzustellen. Die Unterstützten Typen sind: WS2801, WS2811, WS2812B, WS2813, WS2814, WS1815, SK6812, APA102, LPD8806, SK9822, TM1814, GS8208. Es kommen auch immer wieder neue Typen auf den Markt, die einen kompatiblen Ansteuerungsprotokoll haben.
WLED SW unterstützt aber auch die sogenannten Analogen LED Streifen, wo alle LEDs nur gleich eingesteuert werden können. Diese Typen brauchen pro Farbe einen eigenen GPIO. Es gibt einfarbige CCT, RGB, RGBW and RGBCCT Streifen. Zudem braucht man nicht nur ein Mikrocontroller, sondern in jedem Fall einige zusätzlichen Komponenten wie MOSFETs.
##03##Wie steuert man analoge LED Streifen an?
Analoge LED Streifen brauchen für die Ansteuerung nicht nur einen Mikrocontroller, sondern in jedem Fall einige zusätzlichen Komponenten wie MOSFETs.
Ein Prinzipschaltbild ist hier dargestellt. Pro Farbe braucht man einen MOSFET und einen GPIO. Man beachte, dass die MOSFETS bei Überlast sehr schnell zerstört werden. Um Brandgefahr zu verringern und Verletzungen zu vermeiden, sollte man zusätzliche Schaltungselemente vorsehen um MOSFETS gegen Übertemperatur und Überlast zu schützen. Schmelzsicherungen sind je nach Typ dafür zu langsam! Es könen auch selbst-schützende MOSFETs verwendet werden.
[pic29]
##03##Was ist bei dem LED Typ WS2814 (12V oder 24V) zu beachten?
LED Streifen mit diesem Typ sind RGBW Streifen, ähnlich wie SK6812 Typ. Sie müssen also in WLED Einstellungen als SK6812 Typ behandelt werden. Zudem bei diesen Streifen ist oft der weiße Kanal und der Grüne Kanal vertauscht, man muss also in WLED Einstellungen „Swap W & G“ einstellen. Diese Einstellungsoption gibt es erst ab WLED Version 0.14.0-beta1.
##03##Was ist bei adressierbaren 12V und 24V LED Typen zu beachten?
Zu einem ist bei diesen Typen ein störungsfreier Betrieb meistens nur mit einem LevelShifter möglich. Zum andren ist oft bei diesen Typen einzelne LEDs in Gruppen von 3 (bei 12V) oder in Gruppen von 6 (bei 24V) geordnet. LEDs in einer Gruppe lassen sich nicht unabhängig voneinander einsteuern. Man spricht auch von einer logischen LED, die dann physikalisch halt aus 3 oder 6 LEDs besteht.
[pic15]
##03##Was ist ein Clock Signal?
Die meisten adressierbaren LED Typen benötigen nur ein Datensignal für die Ansteuerung. Die Frequenz des Steuersignals ist bei diesen Typen fest. Es gibt aber auch adressierbaren LED Typen, die außer Datensignal ein Clock-Signal benötigen. Bei diesen Typen wird als Taktgeber vom Controller an LED Streifen ein Clock Signal übertragen. Für diese Typen werden also für die Ansteuerung zwei GPIOs gebraucht und diese müssen in WLED Einstellungen korrekt eingestellt werden. Der Vorteil ist, dass durch die Clock-Steuerung eine schnellere Datenübertragung vom Controller an LED Streifen möglich. Es lassen sich schnellere Effekte bei sehr vielen LEDs ablaufen.
##04##Welchen Querschnitt müssen die Kabel besitzen?
Die Leitungen für die Datenübertragung (Daten- und ggf. Clock-Signale) können einen sehr kleinen Querschnitt besitzen, weil da kaum Strom fließt. Die Leitungen für die Stromversorgung (GND und 5V/12V/24V etc.) müssen aber ordentlich dimensioniert werden. Dafür sollte man ausreichende elektrotechnischen Kenntnisse besitzen. Als eine Hilfe kann für die Auslegung der WLED Calculator verwendet werden.
##04##Braucht man eine Sicherung? Welche?
Für einen sicheren Betrieb müssen die Leitungen und LED Streifen unter anderem gegen Überlast und Kurzschluss abgesichert werden. Das ist allerdings nicht damit getan, einfach irgendeine Sicherung einzubauen. Eine Sicherung, z.B. eine Schmelzsicherung, ist nur dann wirksam, wenn sie richtig ausgelegt ist. Dafür sollte man ausreichende elektrotechnischen Kenntnisse besitzen. Als eine Hilfe kann für die Auslegung der WLED Calculator verwendet werden.
##04##Was sind die Zwischeneinspeisungen? Brauche ich sie und wie viele?
Ein längeres LED Streifen mit vielen LEDs kann recht viel Strom benötigen. Diesen Strom kann man nicht in voller Höhe nur am Beginn eines LED Streifens einspeisen. Das Problem ist, dass wegen des Spannungsabfalls innerhalb des Streifens an hinteren LEDs dann zu wenig Spannung ankommt, so dass diese dann nicht mit voller Stärke leuchten oder sogar die Farben verfälschen. Es kann also notwendig sein, LED Streifen auch von hinten oder sogar zusätzlich auch an einer oder mehreren Stellen dazwischen mit Strom zu versorgen. Wie viele Einspeisungen man idealerweise braucht, kann mit dem WLED Calculator berechnet werden.
[pic16]
##04##Schützt eine z.B. 10A Sicherung gegen Ströme größer als 10A?
Nein. Der bei der Sicherung angegeben Stromwert ist ein sogenannter Nominalwert der Sicherung. Deren genaue Bedeutung ist je nach Sicherungstyp leicht unterschiedlich. Betrachten wir im Folgenden als Beispiel eine typische KFZ Sicherung. Diese werden oft in WLED Controllern eingesetzt, weil deren Spanungsbereich (bis 32V), Tauglichkeit für DC-Ströme und großer Auswahl an Nominalwerten (1 A bis 40 A) sie dafür besonders geeignet machen. Diese Sicherungen sind in der Norm ISO 8820-3 spezifiziert und besitzen daher immer ein ähnliches Verhalten, auch wenn sie von diversen Herstellern produziert werden. Aber Achtung: auf diversen Verkaufsplattformen sind oft billige Nachbauten zu finden, die diese Spezifikation gar nicht erfüllen und teilweise somit gar nicht richtig funktionieren. Also, z.B. eine 10A KFZ Sicherung muss 110% vom Nominalstrom, also 11A, noch mindestens 100 Stunden tragen können. 135% vom Nominalstrom (also 13,5A) wird sie auch immer noch 0,75 s bis 600 Sekunden tragen, bevor sie schmelzt und den Strom trennt. Den doppelten Strom (20A) kann Sie noch bis zu 5 s tragen, mindestens 0,15 s. Und sogar noch 6-fachen Strom (60 A) wird sie bis zu 100 ms tragen. Diese Angaben gelten für die nominale Raumtemperatur, bei anderen Temperaturen können die Zeiten noch anders sein. Also wenn z.B. eine 10A Sicherung den Strom von 20A noch bis zu 5s tragen kann, müssen auch andere Komponenten, die die Sicherung schützen muss, diesen Strom noch tragen können, ohne dass sie in dieser Zeit beginnen zu brennen etc. 
##04##Wie muss ich eine Sicherung auswählen? 
Oft meint man, man kann irgendeine Sicherung einsetzen und damit ist alles sicher. In keinem Fall! Nur eine korrekt ausgewählte und dimensionierte Sicherung kann bei Überlast oder Kurzschluss rechtzeitig abschalten und damit ein Brand verhindern. Dabei ist die Vorgehensweise wie folgt:
1. Man bestimmt den notwendigen Betriebsstrom, der durch die Sicherung fließen muss. Das ist also z.B. der Strom, den die LEDs maximal verbrauchen.
2. Nun wählt man eine Sicherung, die genug Stromtragfähigkeit besitzt, um bei einem Betriebsstrom über die Lebensdauer zu funktionieren, ohne zu früh durchzuschmelzen.
3. Man wählt Verbindungskabel, Klemmen etc. Dabei spielen zwei Aspekte die Rolle:
 a) Diese Komponenten dürfen nicht nur bei einem Betriebsstrom nicht überhitzen, sie müssen auch alle Ströme so lange standhalten können, wie lange sie die Sicherung durchlässt. Wenn z.B. bei einem Betriebsstrom von 8A eine 10A KFZ Mini-Sicherung gewählt wurde, müssen die Kabel etc. 11 A dauerhaft tragen können, 13,5 A für mindestens 600 s, 20 A für 5 Sekunden und sogar noch 60A für 100 ms ohne in Brand zu geraten.
 b) Verbindungskabel dürfen keinen zu hohen Spannungsabfall verursachen. Hier kommt es nicht nur auf den Querschnitt des Kabels an, sondern auch auf die Länge. Der Spanungsabfall kann der Grund sein, warum man einen deutlich höheren Querschnitt nehmen muss, obwohl aus Punkt a) kein so großer Kabelquerschnitt notwendig wäre.
Einen guten Startpunkt liefert WLED Calculator.
##05##Welche aktive WLED SW Abzweigungen gibt es?
Es sind vor allem drei Abzweigungen relevant:
1. Das Original: Aircoookie WLED. Das ist die ursprüngliche/originale WLED SW. Bis zu Version 0.13.3 gab es in dieser Version keine Möglichkeit Sound Reactive WLED zu machen. Ab Version 0.14.0 ist ein sog. Audio Reactive Usermod vorhanden.
2. Sound Reactive WLED: dieser Zweig ist vor einigen Jahren entstanden und implementiert die sogenannte Sound Reactive WLED. Dabei ist es möglich mit einem Mikrofon oder Line-In Eingang an erreichen, dass die LEDs auf die Musik (oder andere Geräusche) reagieren und zum Beispiel in Takt dann leuchten.
3. MoonModules WLED: diese Abzweigung ist eine „Spielwiese“, geschaffen durch einige WLED Entwickler, um vor allem neue Funktionen auszuprobieren oder Änderungen an vorhandenem Code zu testen.
Über diesen WLED Installer können Sie sich jede Version installieren und ausprobieren.
##05##Was ist ein Usermod in WLED SW?
Ein Usermod ist im Prinzip eine Erweiterung, die ein Nutzer/Programmierer zusätzlich zum Grundfunktionsumfang der WLED Software programmieren kann. Um ein Usermod nutzen zu können, muss dieser zusammen mit WLED Software kompiliert werden. Offizielle WLED Releases beinhalten keine Usermods, inoffizielle Quellen wie WLED Installer bieten auch bereits kompilierte WLED Versionen mit einigen Usermods an. Das bedeutet jedoch in vielen Fällen, dass wenn Sie ein oder mehrere Usermods verwenden möchten, müssen sie WLED Software dafür selbst kompilieren. Dabei kann dieser WLED Compile Helper hilfreich sein. Dabei muss man auch beachten, dass einige Usermods veraltet sein können und mit aktueller WLED Version eventuell nicht oder nicht vollständig korrekt funktionieren, weil Usermods eben nicht von WLED Community, sondern oft von einzelnen Nutzern/Entwicklern programmiert wurden und daher auch nicht besonders gut gepflegt bzw. auf dem Laufenden gehalten werden.
##05##Was ist ein Segment in WLED SW?
Segmente sind die Möglichkeit, ein LED Streifen in virtuelle Teile aufzuteilen um jedem Teil eine eigene Farbe oder ein eigenes Effekt zuzuweisen. Damit lassen sich vielfältige Effekte realisieren. Z.B. man kann LED Streifen in zwei Segmente aufteilen und das zweite Segment als ein gespiegeltes einstellen: damit kann man dann symmetrische Effekte realisieren.
[pic17]
##05##Was bedeuten Symbole „Palette“, „Matrix“, „Note“ und „Doppelte Note“ bei WLED Effekten?
Ab WLED Version 14.0 werden bei Effekten zusätzliche Symbole angezeigt. Diese weisen auf bestimmte Möglichkeiten oder Besonderheiten des jeweiligen Effekts hin:
„Ein Punkt“: 0D-Effekte, also Effekte, bei dnene alle LEDs gleich leuchten.
„Drei Punkte“: 1D-Effekte, also Effekte für ein LED Streifen.
„Matrix“: Diese Effekte sind 2D Effekte für LED Matrizen.
„Palette“: Bei diesem Effekt können unterschiedliche Paletten eingestellt werden.
„Note“: Dieser Effekt ist ein Audio Reactive Effekt und reagiert auf die Lautstärke des Audiosignals.
„Doppelte Note“: Dieser Effekt ist ein Audio Reactive Effekt und reagiert auf die Frequenzen in dem Audiosignal.
[pic18]
##05##Kann ich WLED Controller über Internet ansteuern?
Leider nicht direkt. WLED Interface im Browser oder WLED App funktionieren nur dann, wenn der Controller und der PC/Smartphone im gleichen lokalen Netzwerk sind. Eine sichere direkte Ansteuerung über Internet ist nicht möglich. Es ist jedoch möglich ein Hausautomatisierungssystem zu installieren (spezielle Hardware notwendig), wie z.B. Home Assistant oder IoBroker. Diese haben die Möglichkeit WLED Controllern anzusteuern und stellen gelichzeitig die Optionen zur Verfügung, auf die Systeme über Internet zuzugreifen. Eine andere Option ist eine VPN Verbindung einzurichten. Einige moderne Router unterstützen das. Dann verbindet man sich erst über Internet mit seinem Netzwerk zu Hause (über sichere VPN Technologie) und dann kann man auf WLED wie gewohnt zugreifen. Noch eine einfache, aber vom Umfang her limitierte Option ist, WLED Controller mit Alexa Gerät (wie Amazon Echo) zu verbinden, wenn man einen hat. Dann kann man über Alexa App den Controller zu steuern, allerdings nur limitiert auf ein- und ausschalten sowie Helligkeit ändern. Man könnte natürlich theoretisch den direkten Zugriff vom Internet auf WLED Controller im Router freizugeben. Das ist jedoch extrem unsicher, weil die Daten keinerlei geschützt sind und jeder so Ihr Controller ansteuern kann.
##05##Kann WLED Controller durch Alexa gesteuert werden?
Ja. Man muss im Bereich „Alexa Voice Assistant“ unter „Config->Sync Interfaces“ beim „Emulate Alexa device:“ den Hacken setzen und mit „Save“ abspeichern. Dan startet man den Controller neu, startet in Alexa App die Suche nach neuen Geräten und richtet den Controller wie eine Lampe ein. Die Steuerungsmöglichkeiten sind allerdings stark begrenzt auf ein- und ausschalten, Helligkeit ändern sowie einige Presets aufrufen.
[pic19]
##06##Wie kann ich einstellen, dass beim Hochfahren WLED eine bestimmte Farbe einstellt oder ein bestimmtes Effekt abspielt?
Dafür sind zwei Schritte notwendig. Erstens muss man ein Preset erstellen, der die gewünschte Farbe oder ein Effekt aktiviert. Zweitens muss man unter Config -> LED Preferences bei der Einstellung „Apply preset … at boot“ den ID von dem erstellten Preset eintragen und unten auf „Save“ klicken.
Genau so kann auch eine ganze Playliste beim Hochfahren abgespielt werden. Dafür muss man anstatt Preset ID einen Playlist ID in die oben genannte Einstellung eintragen.
[pic20]
##06##Was ist „Mapping“?
„Mapping“ ist die Möglichkeit die Reihenfolge der einzelnen LEDS in dem Streifen programmtechnisch zu ändern. Normalerwiese sind alle LEDs in einem Streifen datentechnisch (also über die Datenleitung) in Serie nacheinander verschaltet: 1->2->3->4->…. Für einige spezielle Effekte oder insbesondere für 2D Matrizen will man oft die Reihenfolge ändern, jedoch ohne dass man das ganze Streifen anders zusammen löten muss. Man kann z.B. erreichen, dass alle 3 LED die Reihenfolge der LEDs sich umkehrt, also durch Mapping so einstellen, als ob die logische Reihenfolge der LEDs im Streifen so wäre: 1->2->3->6->5->4->7->8->9->12->11->10 usw.
Mapping wird eingestellt über eine JSON Datei, die ledmap.json heißen muss. Man muss also eine spezielle Datei in JSON Format vorbereiten. Für den oben genannten Beispiel wird der Inhalt dieser Datei dann wie folgt aussehen: {"map":[0,1,2,5,4,3,6,7,8,11,10,9]}. Man beachte dabei, dass die LEDs dabei beginnend mit 0 nummeriert werden. Außerdem sollte man vermeiden unnötige Leerzeichen zu verwenden. Man kann einzelne LED Positionen weglassen indem man an der Stelle -1 angibt.
Es können auch mehrere Maps definiert werden. Für jede Map verwendet man dann eine eigene Datei mit dem Namen ledmapX.json, wo X die Nummer ist (1, 2 etc.). Welche Map dann verwendet wird, kann man in einem Preset mit "ledmap":X,... festlegen, wobei X die Map Nummer der JSON Datei ist. Also dann sieht im einfachsten Fall der Inhalt von dem Preset (API command) wie folgt aus: {"on":true,"ledmap":1}. Die ledmap.json Datei (also ohne Nummer) wird dagegen nicht über Preset, sondern immer beim Starten automatisch angewendet.
[pic21]
Die erstellte ledmap.json Datei (oder halt ledmapX.json Dateien) muss man auf WLED Controller hochladen. Dafür öffnet man im Browser die Adresse http://YourWLEDIP/edit, wobei YourWLEDIP ist die IP Adresse von Ihrem WLED Controller ist. Das ist ein Werkzeug um die Konfigurationsdateien auf dem WLED Controller zu bearbeiten. Damit diese Seite korrekt angezeigt wird, muss ihr Controller mit dem Internet verbunden sein, also bereits in Ihr WLAN Netzwerk integriert sein und nicht mehr „nur“ als WLED-AP verfügbar sein. Man kann die JSON Dateien auch hier direkt erstellen. Damit die erstellte oder hochgeladene ledmap.json Datei auch angewendet wird, muss der Controller neu gestartet werden.
[pic22]
##07##Was ist ein Preset in WLED SW?
Ein Preset ist eine gespeicherte LED Lichtkonfiguration, die man später erneut aufrufen kann, ohne dass man alles wieder neu einstellen muss. Man kann zum Beispiel für ein bestimmtes gewünschtes Effekt Segmente einstellen, für jedes Segment eine Farbe oder ein Effekt definieren. Diese Einstellungen kann man dann in einem Preset abspeichern und mit einem Click immer wieder aufrufen, wen man es braucht. Man kann auch in WLED Einstellungen einstellen, dass ein bestimmtes Preset beim Start des Controllers automatisch aufgerufen wird. Oder man kann ein physikalischer Taster an den Controller anschließen und diesem Taster dann ein Preset zuweisen. Oder man kann in WLED Einstellungen einstellen, dass ein Preset zu einer bestimmter Tageszeit aktiviert wird.
##07##Gibt es Beispiele für Presets API Befehle?
Im Folgenden werden einige Preset Beispiele gezeigt. Presets kann man erstellen, indem man den aktuellen Zustand erfasst und als Preset abspeichert. Oder man kann ein Preset durch ein API Befehl beschreiben. API Befehle gibt es zwei Varianten: HTTP API oder JSON API. Man kann wahlweise die eine oder die andere Variante verwenden, wobei JSON API mehr Möglichkeiten bietet. Diese API Befehle muss man dann bei Preset im Fenster „API command“ eintippen:
[pic30]
Beispiele:
<table class="table"><thead><tr><th scope="col">HTTP API</th><th scope="col">JSON API</th><th scope="col">Beschreibung</th></tr></thead><tbody><tr><td>T=2</td><td>{&quot;on&quot;:&quot;t&quot;}</td><td>Es wird zwischen Ein und Aus Zustand gewechselt (toggeln). Also wenn LEDs aus sind, werden die eingeschaltet und umgekehrt.</td></tr><tr><td>T=1</td><td>{&quot;on&quot;:true}</td><td>Die LEDs werden eingeschaltet (bzw. keine Änderung, wenn sie schon davor eingeschaltet waren)</td></tr><tr><td>T=0</td><td>{&quot;on&quot;:false}</td><td>Die LEDs werden ausgeschaltet (bzw. keine Änderung, wenn sie schon davor eingeschaltet waren)</td></tr><tr><td></td><td>{&quot;on&quot;:true,&quot;tt&quot;:0}</td><td>Die LEDs werden eingeschaltet, dabei leuchten die LEDs sofort ohne langsames dimmen unabhängig von der globalen Einstellung „Transition“.</td></tr><tr><td>A=128</td><td>{&quot;bri&quot;: 128}</td><td>Die Helligkeit wird auf 50% eingestellt. Minimaler Wert ist 0, maximaler Wert (100%) ist 255. Daher bedeutet 128 die Helligkeit von 50%</td></tr><tr><td>A=~10</td><td>{&quot;bri&quot;:&quot;~10&quot;}</td><td>Die Helligkeit wird um 10 erhöht. Also wenn diese bisher 100 war, wird es 110.</td></tr><tr><td>A=~-20</td><td>{&quot;bri&quot;:&quot;~-10&quot;}</td><td>Die Helligkeit wird um 20 verringert. Also wenn diese bisher 100 war, wird es 80.</td></tr><tr><td>R=255&amp;G=0&amp;B=0</td><td>{&quot;seg&quot;:[{&quot;col&quot;:[[255,0,0]]}]}</td><td>Die Farbe von LEDs wird auf Rot eingestellt</td></tr><tr><td>R=0&amp;G=255&amp;B=0&amp;A=128&amp;FX=0</td><td>{&quot;seg&quot;:[{&quot;fx&quot;:0,&quot;col&quot;:[[0,255,0]]}],&quot;bri&quot;:128}</td><td>Die Farbe von LEDs wird auf Grün eingestellt, die Helligkeit auf 50% (Wert 128) und Effekt auf Solid (FX=0)</td></tr><tr><td>P1=1&amp;P2=3&amp;PL=~</td><td>{&quot;ps&quot;:&quot;1~3~&quot;}</td><td>Zwischen Presets mit IDs 1 bis 3 iterieren: Beim aufrufen wird nächstes Preset aufgerufen und so zyklisch weiter: 1-&gt;2-&gt;3-&gt;1-&gt;2-&gt;3-&gt;1-&gt;…..</td></tr></tbody></table>
##07##Was ist ein Playlist in WLED SW?
Playlist (eine Playliste) ist die Möglichkeit eine ganze Reihe von Presets nacheinander abspielen zu lassen. So lassen sich aus einzelnen Effekten noch komplexere Effekte erstellen. Für jeden Preset kann man dabei die Abspieldauer (Duration) du die Übergangszeit zum nächsten Preset (Transition) definieren. Man kann wählen, ob die Playliste nur einmal oder unendlich oft (Repeat indefinately) abgespielt wird. Man kann auch einstellen, dass einzelne Presets in der Playliste nicht in definierter Reihenfolge, sondern zufällig nacheinander abgespielt werden (Shuffle).
[pic23]
##08##Was ist „WLED UDP Sync“?
WLED UDP Sync ist die Möglichkeit mehrere WLED Controller so zu betreiben, dass die angeschlossenen LED Streifen an jedem Controller zueinander synchron und exakt gleich angesteuert werden, also immer gleiche Farbe oder gleiches Effekt abspielen indem man diese Farbe oder Effekt nur bei einem Controller einstellt. Man kann auch einstellen, was genau synchronisiert sein muss: Helligkeit, Farbe, Effekte, Segmente etc. So können mehrere LED Streifen das gleiche Farbspiel zeigen, auch wenn sie z.B. aus räumlichen Gründen an verschiedenen WLED Controllern angeschlossen sind. Die Einstellungen müssen im Bereich „WLED broadcast“ unter „Config->Sync Interfaces“ vorgenommen werden. Es können bis zu 8 Gruppen definiert werden. Man also z.B zwei Controller in eine Gruppe zuordnen und die anderen zwei in die andere. Dann werden die ersten zwei Controller untereinander synchronisiert (Gruppe 1) und die anderen zwei untereinander (Gruppe 2), nicht jedoch die Gruppen 1 und 2 untereinander. Auf der Haupt-User-interface WLED Seite gibt es oben ein „Sync“ Knopf, mit dem Man WLED Sync ein- und ausschalten kann. „UDP“ in „WLED UDP Sync” bedeutete, dass diese Synchronisatin über ein UDP Netzwerkprotokoll implementiert ist.
[pic24]
##08##Was sind „Virtuelle LEDs“?
„Virtuelle LEDs“ sind die Möglichkeit, zwei oder mehr LED Streifen an unterschiedlichen Controllern wie ein Streifen zu betreiben. Z.B. man schlisst an einen WLED Controller ein LED Streifen an, und an einen anderen WLED Controller einen anderen LED Streifen. Man möchte aber, dass beide Streifen wie ein einzelnes Streifen angesteuert werden. Dafür muss man erstmal beide Streifen an jedem Controller ganz normal konfigurieren (LED Typ, Anzahl etc.). Dann fügt man am ersten Controller einen virtuellen LED Streifen dazu (als zweites Streifen). Man geht also zu „LED Outputs“ unter „Config->LED Preferences“, klickt auf ein „+“ Symbol und wählt da als Streifen Typ „DDP RGB (network)“ oder „DDP RGBW (network)“ aus. Hier muss man dann auch Startnummer und die LED Anzahl eingeben (am zweiten Streifen). Zudem muss man die IP Adresse von dem zweiten Controller eingeben. So wird der erste Controller sein eigenes LED Streifen und auch über Netzwerk das zweite LED Streifen ansteuern, als ob das ein wäre.
[pic25]
##09##Was ist der Unterschied zwischen Sound Reactive und Audio Reactive WLED?
Grundsätzlich bedeuten beides das gleiche: das ist die Möglichkeit WLED Controller so zu verwenden, dass die LEDs auf Musik oder andere Geräusche reagieren und in Takt leuchten. Originale WLED Software hatte jedoch diese Möglichkeit nicht, daher wurde damals eine Abzweigung (Fork) von der Software generiert, wo diese Option dann zusätzlich implementiert wurde. Diese WLED Software heißt Sound Reactive WLED (oder kurz SR WLED). Später wurde auf Basis von Sound Reactive WLED für die originale WLED Version ein UserMod entwickelt, auch mit so einer Funktionalität. Dieser UserMod heißt AudioReactive (AR WLED). Für SR WLED und AR WLED brauchen Sie einen ESP32 basierten WLED Controller. SR WLED hat bis zur Version 0.13.0-beta3 auch ESP8266 Mikrocontroller unterstützt, danach jedoch nicht mehr.
##09##Welche Mikrofone kann ich für Sound Reactive WLED verwenden?
Es werden drei Mikrofon-Typen unterstützt:
1.Analoge Mikrofone. Beispiele sind MAX4466 und MAX9814 (etwas besser). Diese Mikrofone sind einfach zu verwenden: man muss nur 3.3V, GND und den analogen Ausgang von dem Mikrofon an einen ADC Eingang (Analog-to-Digital Converter) vom einem ESP8266 oder ESP32 anschließen. Der große Nachteil ist jedoch die Qualität: sowohl von den Mikrofonen selbst als auch von den in Mikrocontroller integrierten ADCs, die eigentlich für Audioverarbeitung nicht gut geeignet sind.
[pic26]
2. I2S digitale Mikrofone. Beispiele sind INMP441 und ICS-43434/ICS-43432. Diese haben einen integrierten ADC und liefern bereits ein digitales Signal. Der Vorteil ist die bestmögliche Qualität. Die Nachteile sind höhere Komplexität (man braucht mehrere PINs für digitales Signal) und die Unterstützung nur bei ESP32 basierten Controllern, nicht in Kombination mit ESP8266 weil dieser keinen I2S Interface hat.
[pic27]
3. PDM Mikrofone. Ein Beispiel ist SPM1423. Diese sind im Prinzip auch digitale Mikrofone mit einem integrierten Sigma-Delta ADC. Sie sind etwas günstiger als I2S Mikrophone, brauchen einen PIN weniger und die Qualität ist recht gut. Auch für dieses Typ bracht man einen ESP32 basierten Controller.
In WLED Einstellungen muss dann der richtige Mikrofon-Typ sowie die verwendeten GPIOs eingestellt werden.

##09##Kann man Line-Out bzw. Kopfhörer Signal als Quelle für Sound Reactive WLED verwenden?
Ja. Es gibt dabei zwei Optionen:
1. Analoges Line-Out bzw. Kopfhörer Signal mit einer einfachen Schaltung aufbereiten und mit einem ADC Eingang vom ESP8266 oder ESP32 verbinden. In diesem Fall funktioniert das ganze wie mit einem analogen Mikrofon. Die Qualität ist hier auch nicht die beste, weil der ESP8266/ESP32 ADC für die Umwandlung von Audiosignalen nicht besonders gut geeignet ist und die Schaltung zur Signalaufbereitung sehr einfach, aber nicht besonders gut ist. Außerdem kann die Empfindlichkeit recht schlecht sein, so dass das ganze nur bei einer höheren Lautstärke des Signals funktioniert.
[pic28]
In einigen Fällen kann man auf diese Schaltung verzichten und GND der Audioquelle sowie ein Audiokanal (Links oder Rechts) direkt mit ESP (GND und analoges Eingang, z.B. A0 Pin beim ESP8266) verbinden. Technisch sauber ist das jedoch nicht und kann je nachdem besser oder schlechter funktionieren.
2. Analoges Line-Out bzw. Kopfhörer Signal mit einem speziellen Analog-zu-I2S Adapter (basiert z.B. auf einem CirrusLogic CS5343 oder TI PCM1808 or es7243 ICs) in ein digitales I2S Signal umwandeln und dann mit dem ESP32 verbinden. In diesem Fall funktioniert das ganze wie mit einem digitalen I2S Mikrofon. Der Unterschied ist nur, dass man einen extra PIN braucht für MCLK (Master Clock) Signal, der vom ESP32 ausschließlich an GPIOs 0, 1 oder 3 generiert werden kann. Die andere Komplikation besteht darin, dass MCLK ein Hochfrequenzsignal ist und äußerst präzise und über kurze Leitungen verdrahtet werden muss. Aus Stabilitätsgründen ist es besser, einen gebrauchsfertigen Controller mit einem speziellen dafür passenden Line-In-zu-I2S-Adapter zu verwenden. Dann hat man die beste Qualität, Sensitivität und volle Sound Reactive Funktion.

##09##Wie kann man ein PC/Laptop als Musikquelle für Sound Reactive WLED verwenden?
Neben Verwendung der Line-Out Signalen vom PC, stellt LED FX Software eine gute Option dar. LED FX ist ein Programm (Python Script), welches auf dem PC oder Laptop ausgeführt wird (unter Windows, Linux oder auf einem Mac) und Musikdaten an WLED über E1.31 oder UDP Protokolle streamen kann.

##10##WLED Controller (ESP32 basierte) rebooten ständig
Es gibt ein Problem mit WLED Versionen >0.13.2 in Verbindung mit Fritzboxen mit SW >=7.50. WLED Controller rebooten teilweise jede Minute. Eine mögliche Abhilfe (wohl aber nicht 100%) ist in Fritzbox Einstellungen UPnP deaktivieren (Unter Heimnetz -> Netzwerk -> Netzwerkeinstellungen -> weitere Einstellungen -> Statusinformationen über UPnP übertragen). Eine andere möglichen Maßnahme ist in WLED Einstellungen mDNS zu deaktivieren (mDNS Name löschen). Die MoonModules Version (siehe diesen Web-basierten WLED Installer) ist wohl nicht betroffen. 
