####T####WLED FAQ
####U#### Unofficial documentation/FAQ

###01###First steps
###02###Controller
###03###LED strips
###04###Wireing
###05###WLED SW in general
###06###Preferences
###07###Presets and Playlists
###08###Sync, virtual LEDs etc.
###09###Sound / Audio Reactive WLED

##01## What are the most common mistakes during first steps?
The most common mistakes are:
1. LED strip is connected from the back side: addressable LED strips have a direction indicated by small arrows on the strip. The data line must be connected from the side where the arrow begins.
2. Incorrect GPIO set: Check in WLED settings whether the correct GPIO number is set as data output. The ready-to-use controllers usually have the correct settings printed either on the housing or on the circuit board.
3. LED strips with many LEDs connected and set, but the current limiter is still at the default value (850 mA). This often has the effect that LEDs flash briefly when the color changes and then go out immediately or light up very dimly. Check and, if necessary, correct the settings in WLED.
4. Wrong LED type is set. The correct LED type and the correct color sequence (RGB, BGR, etc.) must be set in WLED settings. Check that these settings are correct. You have to know the LED type, but you can simply try out the color sequence to see which is the right one. Special attention must be paid to the WS2814 LED strip, which must be set as SK6812 in the preferences.
5. Wiring is bad. Wiring must be done thoroughly. Loose contacts, cold solder joints, etc. must be avoided. You also need to be careful about the correct sizing of the cables for safety reasons.

##01##What password has WLED-AP?
If WLED software is installed on your controller for the first time and you have not already entered your WiFi data during installation with the web-based installer, then the WLED controller creates an access point (WLAN) with the name WLED-AP. The password for this WiFi is wled1234.
##01## I have set in WLED the wrong password for my WLAN, what should I do?
In the initial state with default settings, WLED SW tries to connect to the WiFi selected. If it doesn't work, WLED-AP is created again. So just wait until WLED-AP reappears. However, this behavior can be changed in WLED settings. For example, WLED-AP can be prevented entirely. If you have already set it this way, only a "hard reset" or new flashing with WLED SW will help.
##02##Which microcontroller types are supported by WLED software?
Currently (as of summer 2023) only the microcontrollers from Espressif, types ESP8266 and ESP32 (with dual core) are fully supported. Some of the newer types like ESP32-C3, ESP32-S2 and ESP32-S3 are experimentally supported, but productive use is not recommended yet because many bugs are suspected. In addition, the installation of these newer types is not that easy: there are several hardware variations/boards for which the SW must be specially compiled. It should also be mentioned that some ESP32-C3 boards (so-called C3 mini V1.0.0) are still being sold on the market where WLAN does not work properly.
##02##How many LEDs can a WLED controller control?
ESP8266 based controllers can control up to approx. 600-650 LEDs. ESP32-based controllers can control up to 4,000 LEDs. However, it is recommended to distribute LED strips over several inputs so that no more than 1000 LEDs are connected to one input: many LEDs n one output lead to the control rate dropping and irregularities being seen with fast effects. When using some transmission protocols, it must also be taken into account that they may only support a limited number of LEDs.
##02##Is a LevelShifter really needed in WLED controller?
Many 5V LED strips can also be operated without a level shifter, especially if the wire between the controller and the LED strip is very short. Sometimes, however, flickering can occur, e.g. the LEDs briefly flash white. Larger disruptions are also possible. With 12V or 24V LED strips, you usually cannot proceed without a level shifter. However, a level shifter is also expressly recommended for 5V LED strips, especially in productive use, to ensure trouble-free operation: a level shifter adapts the signal level of the microcontroller (3.3V) to the signal level of the LED strip (5V for all addressable LED types).
Professional WLED controllers always have an integrated level shifter.
##02##Which LevelShifters are recommended?
The control of the addressable LED strips runs with control signals, which have a basic frequency in the range of 800 kHz up to the single-digit MHz range (depending on the type). Accordingly, a level shifter must be fast enough to be able to pass on these signals cleanly. Fast types such as SN74AHCT125, SN74AHCT32 or SN74LVC2T45 are therefore recommended. Types like SN74HCT (i.e. without “A”) are a bit slow and OK for LED types like WS2812B, but can be too slow for some other LED types. In any case, ready-made bidirectional I2C level shifters built with transistors are not recommended. If necessary, these can be used, but you should then replace the pull-up resistor at the output (usually 10 kOhm) with a smaller one (<=1 kOhm).
##02##Does a resistor have to be installed in the data line between the WLED controller and the LED strip?  Which one?
In most cases, a resistor in the 33K to 68K ohm range is recommended. The old recommendation was 470 kOhm, but from today's point of view the value in this range is not OK. In principle, operation without a resistor is also possible, but should be avoided in productive use.
##02##Is a ready-made WLED controller recommended, or can one be assembled from individual components?
The answer depends on what you want to do with it. An ESP8266 or ESP32 microcontroller board without any additional components is sufficient for experimenting/trying it out. If you want to do a clean installation that should work for a longer period of time without problems, you really can't get around a ready-made professional part. Qualitative, ready-made WLED controllers not only integrate all the necessary components, they are also significantly more reliable than any hand-soldered PCBs due to industrial production/assembly. The worst idea is to build the whole thing with jumper wire or something similar: not only are loose contacts pre-programmed, but you can also create a high safety risk with them.
##02##Can I connect a button to a WLED controller? How?
Yes. You need a free digital input (GPIO) on the controller for this. Then you can connect a button between this input and ground (GND). If you click on the button, this GPIO is connected to ground at that moment and the controller registers this as a click. However, for this to happen, the button must be set correctly in the WLED preferences. First, a button must be configured. To do this, under Config->LED Preferences you have to assign the GPIO number to which the button is connected to a “Button” (e.g. you take “Button 1” first). You also have to define the button type. Normally it is a "Pushbutton". Then you can set what should happen when the button is clicked. To do this, go to Config->Time & Macros. Here in the "Button actions" area you can define up to three Presets for each button (enter Preset ID) that must be executed if a button is clicked briefly, long or double-clicked (therefore three columns). Of course, presets must have been created beforehand.
##02##How many buttons can be connected to a WLED controller?
WLED software supports up to 4 buttons for ESP32 based and up to 2 buttons for ESP8266 based controllers. Each button needs its own GPIO input and each button can perform up to three actions: at a short click, at a long click and at a double click.
##02##Is it possible to connect a motion detector (PIR sensor) to a WLED controller?
Yes. There are two types of sensors:
1. With a possibility to adjust the sensitivity and the time delay. E.g. HC-SR501 type. These sensors can be connected to WLED and configured as a button.
2. Without the possibility to adjust the sensitivity and the time delay. E.g. HC-SR602 type. For these you have to compile WLED with a PIR Sensor UserMod.
##02##Can a WLED controller be controlled with a remote control?
1. An infrared remote control (IR). For this, however, an infrared receiver must be connected to the WLED controller. Recommended types are TSOP38238 or KY-022. These receivers each have three pins: 3.3V, GND and IR data. IR data pin must be connected to a free GPIO pin. This GPIO must then be set as IR GPIO under "Config->LED Preferences". You also have to choose which infrared remote control you have. The following types are available: 24-key RGB, 24-key with CT, 40-key blue, 44-key RGB, 21-key RGB, 6-key black, 9-key red, JSON remote. The last type gives the opportunity to use any remote control. For this, the IR codes must be listed in a JSON file and then uploaded to the WLED.
2. From version WLED 14.0-beta3: An ESP-NOW compatible remote control. An example of this is the „WIZmote“ remote control. This is based on an ESP microcontroller. ESP-NOW can be activated in WLED settings. You have to enter the Hardware MAC address of the remote control. This is determined by clicking on any button on the remote control and copying the last received MAC address from the "Last Seen" field to the "Hardware MAC" field in WLED ESP-NOW settings (“Config->WiFi Setup”) and saving it with "Save". Advantages: no special receiver needs to be attached to the WLED controller and the signals are transmitted via radio network. Therefore there is no line of sight between the remote control and the WLED controller required, as is the case with an IR remote control.
The 4 buttons "1"-"4" of the WIZmote remote control are linked to presets 1 to 4. The meaning of other keys is self-explanatory. Attention: WIZmote needs two good quality AAA batteries to work properly. If the batteries are too weak, the correct signal will not be sent, even if the blue LED on the remote control lights up briefly, actually indicating signal transmission.
##02##Can the WLED Controller be connected via Ethernet (LAN) instead of wireless?
Yes. However, this is only possible with an ESP32-based controller and additional hardware. Then you can activate Ethernet under "Config->WiFi Setup" by selecting the Ethernet controller type or adapter type: ABC! WLED V43 & compatible, ESP32-POE, ESP32Deux, KIT-VE etc. The WLED version used must have been compiled with Ethernet support.
##03##Which LED strip types are supported by WLED software?
WLED makes most sense with so-called digital, addressable LED strips, where you can control individual LEDs separately. This allows you to set many effects. The supported types are: WS2801, WS2811, WS2812B, WS2813, WS2814, WS1815, SK6812, APA102, LPD8806, SK9822, TM1814, GS8208. There are sometimes new types coming onto the market that have a compatible control protocol.
However, WLED SW also supports the so-called analog LED strips, where all LEDs can only be controlled in the same way. These types need their own GPIO for each color. There are monochrome CCT, RGB, RGBW and RGBCCT strips. In addition, you not only need a microcontroller, but in any case some additional components such as MOSFETs.
##03##What should I consider when using LED type WS2814 (12V or 24V)?
LED strips of this type are RGBW strips, similar to SK6812 type. They must therefore be treated as SK6812 type in WLED LED preferences. In addition, in these strips, the white channel and the green channel are often swapped, so you have to set "Swap W & G" in the WLED preferences. This setting option is only available starting with WLED version 0.14.0-beta1.
 ##03##What should I consider using addressable 12V and 24V LED types?
On the one hand, with these types, trouble-free operation is usually only possible with a LevelShifter. On the other hand, these types often have individual LEDs arranged in groups of 3 (at 12V) or in groups of 6 (at 24V). LEDs in a group cannot be controlled independently of each other. One also speaks of a logical LED, which then physically consists of 3 or 6 LEDs.
##03##What is a clock signal?
Most addressable LED strip types only require a data signal for control. The frequency of the control signal is fixed for these types. However, there are also addressable LED types that require a clock signal in addition to the data signal. With these types, a clock signal is transmitted from the controller to the LED strips. In this case two GPIOs are needed for the control and these must be set correctly in the WLED settings. The advantage is that the clock control enables faster data transfer from the controller to the LED strips. Faster effects can be run with a large number of LEDs.
##04##What cross-section must the cables have?
The lines for data transmission (data and eventually clock signals) can have a very small cross-section because only very small current flows there. However, the lines for the power supply (GND and 5V/12V/24V etc.) must be properly dimensioned. For this you should have sufficient electrical knowledge. The WLED Calculator can be used as a basis for the design.
##04##Do I need a fuse? Which one?
For safe operation, the cables and LED strips must be, among other, protected against overload and short circuits. However, this is not done by simply installing any fuse. A fuse, e.g. a melting fuse, is only effective if it is correctly rated. For this you should have sufficient electrical knowledge. The WLED Calculator can be used as a basis for the design.
##04##What are the power injections? Do I need them and how many?
A longer LED strip with many LEDs can require quite a lot of power. In this case the current cannot be fed in full only at the beginning of an LED strip. The problem is that because of the voltage drop within the strip, too little voltage arrives at the rear LEDs, so that they don't shine with full intensity or the colors are even distorted. It may therefore be necessary to supply LED strips with power from back side or even additionally at one or more points in between. How many injections you need can be calculated with the WLED Calculator.
##05##What active WLED software forks exist?
Three WLED SW forks are particularly important:
1. The Original: Aircoookie WLED. This is the original WLED SW. Up to version 0.13.3 there was no way to make Sound Reactive WLED using this version. Beginning with version 0.14.0 a so-called Audio Reactive Usermod is available.
2. Sound Reactive WLED: this branch was created a few years ago and implements the so-called Sound Reactive WLED. With a microphone or line-in input it is possible to have the LEDs react to the music (or other noises) and then light up with music beats, for example.
3. MoonModules WLED: this branch is a "playground" created by some WLED developers, mainly to try out new functions or to test experimental changes of existing code.
With this WLED installer you can install and try out every version.
##05##What is a “Usermod” in WLED software?
In principle, a Usermod is an extension that a user/programmer can program in addition to the basic functions of the WLED software. In order to be able to use a Usermod, it must be compiled together with WLED software. Official WLED releases do not contain any Usermods, unofficial sources such as WLED Installer also offer pre-compiled WLED versions with some Usermods included. In many cases, however, this means that if you want to use one or more usermods, you have to compile WLED software for them yourself. This WLED Compile Helper can be useful. It is also important to note that some usermods may be outdated and may not work correctly or not at all with the current WLED version, because user mods were not programmed by the WLED community, but often by individual users/developers and are therefore not well maintained or not kept up to date.
##05##What is a segment in WLED software?
Segments add the ability to divide an LED strip into virtual parts to assign each part its own color or effect. This allows a variety of special effects to be realized. For example, you can split LED strips into two segments and set the second segment as a mirrored one: this way you can create symmetrical effects.
##05##What do Palette, Matrix, Note, and Double Note icons mean in WLED effects?
As of WLED version 14.0, additional symbols are displayed for effects. These indicate certain possibilities or special features of the respective effect:
"Palette": with this effect, different color palettes can be set.
"Matrix": these effects are 2D effects for LED matrices.
"Note": this effect is an audio reactive effect and reacts to the volume of the audio signal.
"Double Note": this effect is an audio reactive effect and reacts to the frequencies in the audio signal.
##05## Can I control WLED Controllers via the Internet?
Unfortunately, not directly. WLED Interface in the browser or WLED app only work if the controller and the PC/smartphone are in the same local network. Secure direct control via the Internet is not possible. However, it is possible to install a home automation system (requires special hardware), such as Home Assistant or IoBroker. These have the ability to control WLED controllers and at the same time provide the options to access the systems via the Internet. Another option is to set up a VPN connection. Some modern routers support this. Then you first connect to your home network via the Internet (via secure VPN technology) and then you can access WLED as usual. Another simple but limited option is to pair WLED Controller with Alexa device (like Amazon Echo) if you have one. Then you can control the controller via the Alexa app, but only change on and off state as well as the brightness. Of course, you could theoretically enable direct access from the Internet to the WLED controller in the router. However, this is extremely insecure because the data is not protected in any way and anyone can control your controller in this way.
##05##Can WLED Controller be controlled by Alexa?
Yes. In the "Alexa Voice Assistant" area under "Config->Sync Interfaces" you have to tick "Emulate Alexa device:" and save with "Save". Then you restart the controller, start the search for new devices in the Alexa app and set up the controller like a lamp. However, the control options are very limited to switching on and off and changing the brightness.
##06##How can I make the WLED set a specific color or play a specific effect on startup?
Two steps are necessary for this. First, you have to create a preset that activates the desired color or effect. Second, you have to enter the ID of the created preset under Config -> LED Preferences in the setting “Apply preset … at boot” and then click on “Save” at the bottom of the preferences page.
In exactly the same way, an entire playlist can be played when booting up. For this you have to enter a playlist ID in the above setting instead of a preset ID.
##06##What is "mapping"?
"Mapping" is the possibility of changing the order of the individual LEDs in the strip programmatically. Normally, all LEDs in a strip are connected in series (via the data line): 1->2->3->4->.... For some special effects or especially for 2D matrices you will often change the order without having to solder the whole strip together differently. For example, you can achieve that after each 3 LEDs the order of the LEDs is reversed, also by mapping, as if the logical order of the LEDs in the strip was like this: 1->2->3->6->5->4 ->7 ->8 ->9 ->12 ->11 ->10 etc.
Mapping is set via a JSON file, which must be named ledmap.json. You also need to prepare a special file in JSON format. For the example above, the content of this file will then look like this: {"map":[0,1,2,5,4,3,6,7,8,11,10,9]}. Please note that the LEDs are numbered starting with 0. You should also avoid using unnecessary spaces. You can omit individual LED positions by specifying -1 in their place.
Multiple maps can also be defined. For each map you then use a separate file called ledmapX.json, where X is the number (1, 2 etc.). Which map is then used can be specified in a preset with "ledmap":X,..., where X is the map number of the JSON file. In the simplest case, the content of the preset (API command) looks like this: {"on":true,"ledmap":1}. The ledmap.json file (even without a number), on the other hand, is not applied via preset, but always automatically when starting the controller.
The created ledmap.json file (or ledmapX.json files) must be uploaded to the WLED controller. To do this, open the address http://<YourWLEDIP>/edit in the browser, where <YourWLEDIP> is the IP address of your WLED controller. This is a tool to edit the configuration files on the WLED controller. In order for this page to be displayed correctly, your controller must be connected to the Internet, also already integrated into your WLAN network and no longer "only" available as a WLED-AP. You can also create the JSON files directly here. In order for the created or uploaded ledmap.json file to be applied, the controller must be restarted.
##07##What is a preset in WLED Software?
A preset is a saved LED light configuration that you can recall later without having to set every details again. For example, you can set segments for a certain desired effect, define a color or an effect for each segment. You can then save these settings in a preset and call them up again and again with only one click when you need them. You can also set in WLED settings that a certain preset is automatically called up when the controller is started. Or you can connect a physical button to the controller and then assign a preset to that button. Or you can set in WLED settings that a preset is activated at a certain time of day.
##07##What is a playlist in WLED software?
Playlist is the possibility to play a whole series of presets one after the other. In this way, even more complex effects can be created based on simple effects. For each preset you can define the playing time (duration) and the transition time to the next preset (transition). You can choose whether the playlist must be played only once or repeated indefinitely. You can also set that individual presets in the playlist are not played in a defined order, but randomly one after the other (shuffle).
##08## What is WLED UDP Sync?
WLED UDP Sync is the possibility to operate several WLED controllers in such a way that the connected LED strips on each controller are controlled synchronously and exactly the same way, i.e. always play the same color or the same effect by only setting this color or effect on one controller. You can also set what exactly needs to be synchronized: brightness, color, effects, segments, etc. In this way, several LED strips can show the same play of colors, even if they are connected to different WLED controllers for physical locations reasons, for example. The settings must be made in the "WLED broadcast" area under "Config->Sync Interfaces". Up to 8 groups can be defined. For example, you assign two controllers to one group and the other two to the other. Then the first two controllers are synchronized with each other (group 1) and the other two with each other (group 2), but not groups 1 and 2 with each other. On the main WLED user interface page there is a "Sync" button at the top that allows you to toggle WLED sync on and off. "UDP" in "WLED UDP Sync" means that this synchronization is implemented over a UDP network protocol.
##08##What are "Virtual LEDs"?
"Virtual LEDs" are the possibility of operating two or more LED strips on different controllers like one strip. E.g. you connect one LED strip to a first WLED controller and another LED strip to second WLED controller. But you want both strips to be controlled like a single strip. To do this, you first have to configure both strips on each controller as usually (LED type, number, etc.). Then you add a virtual LED strip to the first controller (as the second strip). For that you go to "LED Outputs" under "Config->LED Preferences", click on a "+" symbol and select "DDP RGB (network)" as the strip type. Here you have to enter the start number and the number of LEDs (on the second strip). You also have to enter the IP address of the second controller. This way the first controller will control its own LED strip and also the second LED strip via network as if it were one.
##09##What is the difference between Sound Reactive and Audio Reactive WLED?
Basically, both means the possibility of using WLED controllers in such a way that the LEDs react to music or other noises and light up in time. However, original WLED software did not have this option, so at that time a fork was generated by the software, where this option was then additionally implemented. This WLED software is called Sound Reactive WLED (SR WLED). Later, a UserMod was developed based on Sound Reactive WLED for the original WLED version, also with such a functionality. This UserMod is called AudioReactive (AR WLED).
##09##What microphones can I use for Sound Reactive WLED?
Three microphone types are supported:
1.Analog microphones. Examples are MAX4466 and MAX9814. These microphones are easy to use: you just have to connect 3.3V, GND and the analog output from the microphone to an ADC input (Analog-to-Digital Converter) of an ESP8266 or ESP32. However, the big disadvantage is the quality: both from the microphones themselves and from the ADCs integrated into microcontrollers, which are actually not well suited for audio processing.
2. I2S digital microphones. Examples are INMP4411 and ICS-43434/ICS-43432. These have an integrated ADC and already output a digital signal. The advantage is the best possible quality. The disadvantages are higher complexity (you need several PINs for a digital signal) and support only for ESP32-based controllers, not in combination with ESP8266 because it has no I2S interface.
3.PDM microphones. In principle, these are also digital microphones with an integrated Sigma-Delta ADC. They are slightly cheaper than I2S microphones, require fewer PINs and the quality is quite good. Also, for this type you need an ESP32 based controller.
The correct microphone type and the GPIOs used must then be set in WLED settings.
##09##Can a line-out or headphone signal be used as a source for Sound Reactive WLED?
Yes. There are two options:
1. Prepare the analog line-out or headphone signal with a simple circuit and connect it to an ADC input from the ESP8266 or ESP32. In this case, the whole thing works like with an analog microphone. The quality is not the best here either, because the ESP8266/ESP32 ADC is not particularly good at converting audio signals, and the signal conditioning circuitry is very simple, but not very good. In addition, the sensitivity can be quite poor, so that the whole thing only works at a higher volume of the signal.
2. Convert the analog line-out or headphone signal into a digital I2S signal with a special analog-to-I2S adapter (based on for example CirrusLogic CS5343 or TI PCM1808 chips) and then connect it to the ESP32. In this case, the whole thing works like with a digital I2S microphone. The only difference to I2S microphone is that you need an extra PIN for MCLK (Master Clock) signal, which can only be generated by the ESP32 on GPIOs 0, 1 or 3. The advantage is the best quality and good sensitivity.
